FROM node:14.13.0-alpine3.12
LABEL maintainer="Daniel Rataj <daniel.rataj@centrum.cz>"
LABEL org.opencontainers.image.source="https://github.com/whoopsmonitor/whoopsmonitor-alert-smtp"

LABEL com.whoopsmonitor.documentation="https://github.com/whoopsmonitor/whoopsmonitor-alert-smtp"
LABEL com.whoopsmonitor.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAFPElEQVRoge2ae2hXZRjHP7volltZCdvsQi3X1bJWCVZbhklSTVDqj8puCNUiiMSKgiK6CFl0gdaFKAIpNEq7aJdZWKF0m39M2uhiYl5S1LKt1dK5/X798Zzh2XOe9z3n/C4jwi+8f5z9vs/tPe/7Ps/7nMEh/LdQUmB95cB5wHTgHOAU4FigCjgc+CsYvwAbgQ5gLdBZYD9yxjTgReB3IJvD2AI8DjSMtuPDmIXMaC7OW2MIWAacNloBnASsLGAAegwAjwGVxQziRqDP48Qu4A2gFWgG6oBqoAyoBSYDM4EHgc+AfR5d64H6QgdQhuwDy2AGeB+4POClQRVwB/CzQ/du4Nz83RdUAO84DH0KTCmAjVLgOmCPYaMHOQXzQhmw3FD+J7LMCo06YJVhbztwTD6KXzCUbkRyRLFQAiwy7H5CjrlvnqGsE9m0o4HFhv1b0io5gejp9BPJgygH5gBvAd3AP0hW3wy8C8wHjojRUQJ8qHzYgRwQifGeUtBH8kR1LfAr0dm0jup5gcxcZKPvAFpCuiYCvUruzqRBXGoYvTmBXC3wUYIA9HiIkafVVqX3AcXvThrI50pwDfGbrAF3Lkg7tijdE5ClGeZMjgvifCWQARpjZM5EEpd2aAh4E8nk1cjROhV4BNkvrkCeMmysUJyFcYG0KYFVMfwJwCbDmW+Rkt6FqURneXjiTjX4rYq31OdUKdHMOtvDL0eWnXZmCTDWZyjAM4bsGgd3muJt8CnWy2pP4KwL9xiOtJE8aWnnssA1Dm6N4u32Kb5bkZd5uDVE1/lq/IFr3GQ453qTFYq7L/xjqSLr4m+tx4kFjExMvcD1wKBHRuM29fwachexkFXP3gnrYGTU0x28sURPqft8ig1MUfIZ/FfdesXf61O+TZGPd/CuVLw/gMOSRhBAn46rY/gXK35X+Ee9tMar5x6H0svU80rkKE2KKmQZhvFyjMwl6rnLZAXQ184KB+8bxZsb44TGfCW/ExgTI/Odkmn1kfW6r3HwdBFXl8j9g9ATsSiGf4HiD+Fe9gD8qASsK+w4xelP7L6gUclngUkxMusUvz3OiL5iWslJJ6Zdidw/iJeUfEcM/waigTfFGXlCCTxtcPQb+ZvkmfzEgB+Wv9/DP4to0l2RxNAcJeSqZ35TvKTtmg+Izu4MB7eeaDHaT8JewXjggBI+3eAtVRxfKTOMu4wgXAdFI3JT1NxUXZt2JfykwWkxjNzr0dmClB5WIOHaagxyG7TK++fSBAFy3w4r6AWONnj6JMkiiXEm8mbHIUuuDam/rCCySK/qDGQiNjs4S0hXjALSONaNA+utNJD7Z4Q041ny+I6j1/MAdk65CLvF6Rr7sTe8NfZSgE5mJdFGQjd2P6ke+DiBYxuAC5F98LWHN3zPn6jszEZWylakWZ4Yswwjy3F325uB55FirgfJF98DryO1WLhArQIeRVqvB5DjfB3wMHCyw5f9IT+2pQkE7L7vq55gioEmoklRt4tiUUH0spUF3kZOpWLjKiQJhm0PBn9PjVpkCehgupASohgYi1TEQ8pmBrg1H8X12F3EAaQ+OzIf5QozkINB28ogfYK8UYu9zIaT5mLsxloSVCGV9hcO/f3A1T4FaRNNJVIR3+7hdCJNtq+QzxDbkU7+IPLmKoDjkIvR2Uhvqxn3nvsBKeXXp/Q1Ea6gcA1r1xhA3nJRP1ETGFiIXaXmG8ArFOGzdBwqkVffjr849I0M0vReQI4fPAv9TzVHIU29JuQeMwm5GlcHtvqQjL8TqXQ3IXvpS6QAPYT/Df4FFhEdkB5DuzQAAAAASUVORK5CYII="
LABEL com.whoopsmonitor.env.WM_SMTP_HOST=""
LABEL com.whoopsmonitor.env.WM_SMTP_PORT=""
LABEL com.whoopsmonitor.env.WM_SMTP_SECURE=""
LABEL com.whoopsmonitor.env.WM_SMTP_USER=""
LABEL com.whoopsmonitor.env.WM_SMTP_PASSWORD=""
LABEL com.whoopsmonitor.env.WM_SMTP_FROM=""
LABEL com.whoopsmonitor.env.WM_SMTP_TO=""

RUN apk add openssl=1.1.1g-r0 --no-cache

WORKDIR /app
COPY ./src/index.js ./index.js
COPY ./src/package.json ./package.json
COPY ./src/package-lock.json ./package-lock.json

RUN npm install

CMD [ "npm", "start", "--silent" ]
